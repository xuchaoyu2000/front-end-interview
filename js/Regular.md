# 正则表达式
### 作者：BlackXu 
## JS通过内置对象RegExp支持正则表达式
### 两种方法支持
- 字面量 `const reg = /\bblack\b/g`;
- 构造函数 `const reg = new RegExp('\\bblack\\b','g')`;

### 修饰符
- `g`：全文搜索
- `i`：忽略大小写
- `m`：多行搜索

### 元字符
- `\t`：水平制表符
- `\v`：垂直制表符
- `\n`：换行符
- `\r`：回车符
- `\0`：空字符
- `\f`：换页符
- `\cX`：与X对应的控制字符（Ctrl+X）

### 字符类
- 用元字符`[ ]`构建简单类，如[black]，其实就是或的意思。

### 字符串取反
- 用`^`创建反向类，如[^black]

### 范围类
- `[a-z]`表示小写字母，还有类似的大写字母和数字，还可以连写`[a-zA-Z0-9]`

### 预定义类
- `.`:除了换行回车外的其他所有字符
- `\d`：数字字符
- `\D`：非数字字符
- `\s`：空白符
- `\S`：非空白符
- `\w`：单词字符（字母、数字下划线）
- `\W`：非单词字符

### 边界
- `\b`：单词边界
- `\B`：非单词边界
- `^`：开始边界
- `$`：结束边界

### 量词
- `？`：出现0次或1次
- `+`：至少出现1次
- `*`：出现任意次
- `{n}`：出现n次
- `{n,m}`：出现n次到m次
- `{n,}`：至少出现n次

### 贪婪模式
- 尽可能多的匹配，默认

### 非贪婪模式
- 在量词后面加`？`号即可，如[\d｛3,5}?]，则匹配3个数字。

### 分组
- 使用`()`来进行分组，后面跟量词来作用

### 或
- 使用`|`来达到效果，在正则中用`(a|b)`表示

### 反向引用
- 用`$`来捕获分组内的内容来引用原文，如'2016-10'.replace(/(\d{4})-（\d{2}）/g,'$2/$1')

### 忽略分组
- 不希望捕获某个分组，在分组内加上`?:`，如(?:Black)(Xu)

### 前瞻
- 正则匹配到规则时，从前向后检查是否符合断言。
- 符合称为正向前瞻`(?=)`，不符合称为负向前瞻。如\w(?=\d)，括号内为断言，不参与规则部分。
- JS不支持后顾。

### 对象属性（只读）
- global：是否全文搜索，默认false
- ignore case：是否忽略大小写，默认false
- multiline：多行搜索，默认false
- lastIndex：当前表达式匹配内容的最后一个字符的下一个位置（非全局调用都是0）
- source：正则表达式的文本字符串

### test方法
- 用于测试字符串参数中是否存在匹配正则表达式模式的字符串，存在返回true，不存在返回false。
- 每次作用字符串后都会影响到lastIndex上。如let reg = /\w/;reg.test('xu');reg.test('xu');reg.test('xu');
- 当第三次作用的时候只有两个字符串，就会重置为零再循环，所以会显示false。

### exec方法
- 使用正则表达式模式对字符串执行搜索，并将更新全局RegExp对象的属性以反映匹配的结果。
- 如果没有匹配的文本返回null，否则返回一个结果数组（index声明匹配文本的第一个字符位置，input存放被检索的字符串string）。
- 非全局调用：第一项是匹配的文本，第二项是所有分组的内容。

### 字符串对象方法
1. String.prototype.search(reg)
- 忽略全局标志。
- 可以搜数字、字符串、正则表达式。
- 返回所在的位置。

2. String.prototype.match(reg)
- 没有g标志就只能在字符串中执行一次，没有匹配返回null,有就返回一个存放匹配文本的数组（index声明匹配文本的第一个字符位置，input存放被检索的字符串string）。
- 有g标志返回所有结果，index是undefined，lastIndex还是0。

3. String.prototype.split(reg)
- 将正则当成分割标志。
- 如'a1b2c3d4e5'.split(/\d/g)

4. String.prototype.replace()
- 两个参数，第一个参数（string或reg）是找谁，第二个参数（string或function）是替换成谁。
- function会在每次匹配替换的时候调用，有四个参数（匹配字符串、正则表达式分组内容，没有分组则没有该参数、匹配项在字符串中的index、原字符串）。
```
'a1b2c3d4e5'.replace(/(\d)(\w)(\d)/g,function(match,group1,group2,group3,index,orgin){
  console.log(match);
  return group1+group3;
});
```

### 终极实例
- 使用fcc上的算法题，检验有效的美国电话号码(以下数字组都为有效)。

```
555-555-5555
(555)555-5555
(555) 555-5555
555 555 5555
5555555555
1 555 555 5555
```

- 答案：`/^1? ?(\(\d{3}\)|\d{3})[ |-]?\d{3}[ |-]?\d{4}$/`

### 工具推荐：RegExper
- <https://regexper.com/>
